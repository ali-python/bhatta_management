{% extends 'base.html' %}
{% block payment %}active{% endblock %}
{% block content %}
{% load static %}

<div class="content-wrapper">
    <section class="content-header">
        <ol class="breadcrumb">
            <li><a href="{% url 'worker:home' %}"><i class="fa fa-dashboard"></i> Home</a></li>
            <li class="active">{% if object %}اپڈیٹ{% else %}سالانہ حساب{% endif %}</li>
        </ol>
    </section>
    <br>

    <section class="content">
        <div class="box">
            <div class="box-header">
                <h4 class="text-center"><b>{% if object %}اپڈیٹ{% else %}سالانہ حساب{% endif %}</b></h4>
            </div>

            <div class="box-body">
                <form method="post">
                    {% csrf_token %}

                    <div class="row">
                        <div class="col-md-4 form-group">
                            <label>مزدور <span style="color:red">*</span></label>
                            <select name="worker" class="form-control" required>
                                {% for worker in workers %}
                                    <option value="{{ worker.id }}" {% if object and object.worker.id == worker.id %}selected{% endif %}>
                                        {{ worker.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-4 form-group">
                            <label>بھٹہ <span style="color:red">*</span></label>
                            <select name="bhatta" class="form-control" required>
                                {% for bhatta in bhattas %}
                                    <option value="{{ bhatta.id }}" {% if object and object.bhatta.id == bhatta.id %}selected{% endif %}>
                                        {{ bhatta.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="col-md-4 form-group">
                            <label>سال <span style="color:red">*</span></label>
                            <input type="number" name="year" class="form-control" 
                                   value="{{ object.year }}" required>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-md-4 form-group">
                            <label>ہزار اِینٹ کا ریٹ<span style="color:red">*</span></label>
                            <input type="number" step="0.01" name="brick_rate" class="form-control"
                                   value="{{ object.brick_rate_per_1000 }}" required>
                        </div>

                        <div class="col-md-4 form-group">
                            <label>ٹوٹل خرچہ </label>
                            <input type="number" step="0.01" name="total_advance" class="form-control"
                                   value="{{ object.total_advance }}">
                        </div>

                        <div class="col-md-4 form-group">
                            <label>ٹوٹل قرضہ کٹوتی</label>
                            <input type="number" step="0.01" name="total_loan_deducted" class="form-control"
                                   value="{{ object.total_loan_deducted }}">
                        </div>

                    </div>

                    <div class="row">

                        <div class="col-md-4 form-group">
                            <label>کل کمائی</label>
                            <input type="number" class="form-control" 
                                   value="{{ object.total_earned|floatformat:0}}" disabled>
                        </div>

                        <div class="col-md-4 form-group">
                            <label>ادائیگی کے لیے رقم</label>
                            <input type="number" class="form-control"
                                   value="{{ object.amount_to_pay|floatformat:0 }}" disabled>
                        </div>

                        <div class="col-md-4 form-group">
                            <label>ادائیگی کی گئی</label>
                            <input type="number" step="0.01" name="payment_made" class="form-control"
                                   value="{{ object.payment_made }}">
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-2 form-group">
                            <button type="submit" class="btn btn-primary form-control">
                                {% if object %}Update{% else %}Calculate & Save{% endif %}
                            </button>
                        </div>
                    </div>

                </form>
            </div>

        </div>
    </section>
</div>

{% endblock %}
